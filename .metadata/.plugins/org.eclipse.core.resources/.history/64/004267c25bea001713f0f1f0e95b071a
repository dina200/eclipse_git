package sea_fight;

import java.util.ArrayList;


public class Game {

	private GameHelper helper = new GameHelper();
	private ArrayList<DotCom> listOfDotCom = new ArrayList<DotCom> ();
	private int numOfGuesses = 0;
	
	private void setUpGame() {
		DotCom dot1 = new DotCom();
		DotCom dot2 = new DotCom();
		DotCom dot3 = new DotCom();
		
		dot1.setName("Pets.com");
		dot2.setName("Go2.com");
		dot3.setName("AskMe.com");
		
		System.out.println("Ваша цель - потопить три \"сайта\".\n " + dot1.getName() + ", " + dot2.getName() + ", " + dot3.getName() + ".");
		System.out.println("Попытайтесь потопить их за минимальное количество ходов");
		
		for (DotCom dotComToSet : this.listOfDotCom) {
			ArrayList<String> newLocation = this.helper.placeDotCom(3);
			dotComToSet.setLocationCells(newLocation);
		}
	}
	
	private void startPlaying() {
		while(!this.listOfDotCom.isEmpty()) {
			String userGuess = helper.getUserInput("Ваш ход");
			checkUserGuess(userGuess);
		}
		finishGame();
	}
	
	private void checkUserGuess(String userGuess) {
		this.numOfGuesses++;
		String result = "Мимо";	
		for (DotCom dotComToTest : this.listOfDotCom) {
			result = dotComToTest.checkYourself(userGuess);
			
			if (result.equals("Попал")) {
				break;
			}
			
			if (result.equals("Потопил")) {
				this.listOfDotCom.remove(dotComToTest);
				break;
			}
		}
		System.out.println(result);
	}
	
	private void finishGame() {
		System.out.println("Все \"сайты\" потоплены.");
		if (numOfGuesses <= 18) {
			System.out.println("Это заняло у вас всего " + this.numOfGuesses + " попыток.");
			System.out.println("Вы выйграли.");
		} else {
			System.out.println("Это заняло у вас много " + this.numOfGuesses + " попыток.");
			System.out.println("Вы проиграли.");
		}
	}
	
	public static void main(String[] args) {
		Game game = new Game();
		game.setUpGame();
		game.startPlaying();
	}
}
